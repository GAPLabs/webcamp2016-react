<!DOCTYPE html>
<html>
<head>
	<title>React 2016</title>
	<script src="js/react.js"></script>
	<script src="js/react-dom.js"></script>
	<script src="js/browser.min.js"></script>
	<script src="js/jquery-2.1.4.js"></script>
	<script src="js/lodash.js"></script>
	<script src="js/jsx-transformer.js"></script>

	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
</head>
<body>
	<section id="react-mount">
	</section>

	<script type="text/babel">
		// git checkout react5

		var Comments = React.createClass({
			render: function(){
				return (
					<div className="comments">
						<section className="add-thread">
							<form className="add-comment-form">
								<div className="form-group">
									<input className="form-control" type='text' ref="name" name='name' placeholder='Name'/>
								</div>
								<div className="form-group">
									<textarea className="form-control" ref="comment" name='comment' placeholder='Comment'></textarea>
								</div>
								<div className="form-group">
									<button className="btn btn-default"><i className='fa fa-1x fa-plus'></i></button>
								</div>
							</form>
						</section>
					</div>
				)
			}
		});

		var Thread = React.createClass({
			getInitialState: function(){
				return {
					comments: []
				}
			},
			render: function(){
				var comments = (this.state.comments.length == 1) ? this.state.comments.length+" comment" : this.state.comments.length+" comments";
				return (
					<li className="cf">
						<div className="description">
							<h2>{this.props.thread.title}</h2>
							<p>{this.props.thread.description}</p>
							<span>submitted by: {this.props.thread.submittedBy} | {comments}</span>

							<Comments/>
						</div>
					</li>
				)
			}
		});

		var Reddit = React.createClass({
			getInitialState: function(){
				return {
					threads: [{
								rank: 1,
								vote: 1,
								title: 'FBI finally hacks iPhone, ending court battle with Apple',
								description: "The FBI's sudden success in circumventing Apple's security measures might raise new questions about whether Apple's products are truly ironclad. It will also lead to heightened speculation over the \"outside party\" that assisted the government at the last minute and criticism from some quarters over the FBI's failure to hack into an iPhone on its own.",
								submittedBy: 'mashable',
								commentCount: 0,
								comments: []
							  }]
				}
			},
			render: function(){
				var threads = this.state.threads.map(function(thread, index){
									return <Thread thread={thread} key={index} index={index} />;
								});

				return (
					<div>
						<section className="content-wrapper">
							<ul className="thread-list">
								{threads}
							</ul> 
						</section>
					</div>
				)
			}

		});

		// The primary API for rendering the React component into the DOM
		ReactDOM.render(<Reddit />, document.getElementById('react-mount'));
	</script>
</body>
</html>